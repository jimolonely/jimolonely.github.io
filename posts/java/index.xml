<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Java on 孤独的寂寞</title><link>https://jimolonely.github.io/posts/java/</link><description>Recent content in Java on 孤独的寂寞</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Sat, 14 May 2022 06:50:53 +0800</lastBuildDate><atom:link href="https://jimolonely.github.io/posts/java/index.xml" rel="self" type="application/rss+xml"/><item><title>Grpc练习</title><link>https://jimolonely.github.io/posts/java/grpc-demo/</link><pubDate>Thu, 26 May 2022 22:48:27 +0800</pubDate><guid>https://jimolonely.github.io/posts/java/grpc-demo/</guid><description>练习下Grpc使用。
proto和Service定义 src/main/proto/AgentModel.proto
模型定义2个实体，参数和返回值。
syntax = &amp;#34;proto3&amp;#34;; option java_package = &amp;#34;com.jimo.grpc&amp;#34;; message AgentInfo { string name = 1; sint32 index = 2; } message ReportResponse { bool ok = 1; string msg = 2; } src/main/proto/AgentService.proto
在服务这边就定义一个report方法。
syntax = &amp;#34;proto3&amp;#34;; option java_package = &amp;#34;com.jimo.grpc&amp;#34;; import &amp;#34;AgentModel.proto&amp;#34;; service Agent { rpc report(AgentInfo) returns (ReportResponse) {} } 编译 加入maven插件，同时编译proto文件和grpc。
&amp;lt;extensions&amp;gt; &amp;lt;extension&amp;gt; &amp;lt;groupId&amp;gt;kr.</description></item><item><title>Java instanceof List&lt;T></title><link>https://jimolonely.github.io/posts/java/java-instanceof-list/</link><pubDate>Fri, 20 May 2022 22:51:28 +0800</pubDate><guid>https://jimolonely.github.io/posts/java/java-instanceof-list/</guid><description>其实这是一个很简单的问题，在Java中，通常我们要判断一个对象是不是某种类型，会用 instanceof 关键字。
但遇到带有泛型的 List&amp;lt;T&amp;gt; 是不能直接使用，这时候怎么办呢？
我会写出下面的代码：
if(a instanceof A){ A a1 = (A)a; } if(a instanceof List &amp;amp;&amp;amp; !((List&amp;lt;?&amp;gt;)a).isEmpty() &amp;amp;&amp;amp; ((List&amp;lt;?&amp;gt;)a).get(0) instanceof A){ List&amp;lt;A&amp;gt; list = (List&amp;lt;A&amp;gt;)a; } 没问题，就是会有警告，而且这种方式在List没有元素时就不行.
另外一种方式侵入性较高，就是对List进行继承，确定一个泛型：
public class ListA extends ArrayList&amp;lt;A&amp;gt; { } ListA listA = new ListA(); listA.add(new A()); assert listA instanceof ListA; 目前还没想到更好的办法，欢迎补充。</description></item><item><title>Maven打Fat Jar的一些问题</title><link>https://jimolonely.github.io/posts/java/maven-fat-jar/</link><pubDate>Sat, 14 May 2022 07:01:22 +0800</pubDate><guid>https://jimolonely.github.io/posts/java/maven-fat-jar/</guid><description>总是忘记maven-shade插件的配置，这里记录一下。
见文档.
&amp;lt;build&amp;gt; &amp;lt;plugins&amp;gt; &amp;lt;plugin&amp;gt; &amp;lt;groupId&amp;gt;org.apache.maven.plugins&amp;lt;/groupId&amp;gt; &amp;lt;artifactId&amp;gt;maven-shade-plugin&amp;lt;/artifactId&amp;gt; &amp;lt;version&amp;gt;3.3.0&amp;lt;/version&amp;gt; &amp;lt;executions&amp;gt; &amp;lt;execution&amp;gt; &amp;lt;phase&amp;gt;package&amp;lt;/phase&amp;gt; &amp;lt;goals&amp;gt; &amp;lt;goal&amp;gt;shade&amp;lt;/goal&amp;gt; &amp;lt;/goals&amp;gt; &amp;lt;configuration&amp;gt; &amp;lt;transformers&amp;gt; &amp;lt;transformer implementation=&amp;#34;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&amp;#34;&amp;gt; &amp;lt;mainClass&amp;gt;com.jimo.Main&amp;lt;/mainClass&amp;gt; &amp;lt;/transformer&amp;gt; &amp;lt;/transformers&amp;gt; &amp;lt;/configuration&amp;gt; &amp;lt;/execution&amp;gt; &amp;lt;/executions&amp;gt; &amp;lt;/plugin&amp;gt; &amp;lt;/plugins&amp;gt; &amp;lt;/build&amp;gt; Invalid signature file digest for Manifest main attributes 有时我们在打完jar包运行会报错：
Error: A JNI error has occurred, please check your installation and try again Exception in thread &amp;#34;main&amp;#34; java.</description></item><item><title>Java Agent如何调试</title><link>https://jimolonely.github.io/posts/java/java-agent/</link><pubDate>Sat, 14 May 2022 06:51:46 +0800</pubDate><guid>https://jimolonely.github.io/posts/java/java-agent/</guid><description> 通过Java Agent，可以无侵入性地增强代码功能，或者拦截代码做一些统计。
比如，在监控系统里，采集应用端的各种代码执行情况就是使用 agent，典型的开源项目 pinpoint.
其最基本使用是通过命令行参数-javaagent:xxx-agent.jar指定:
$ java -jar -javaagent:pinpoint-agent.jar testapp.jar 而在开发过程中，用打日志的方式显然不好调试，所以测试了下在IDEA里，这种agent也是可以debug的。
准备测试项目 TODO
在IDEA里如何调试 代码在同一个项目里 安装agent debug 修改代码后</description></item></channel></rss>